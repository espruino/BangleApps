<!DOCTYPE html>
<html>
<head>
    <title>Google Maps Circle and Geofencing Example</title>
    <style>
        /* Set the size of the map */
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Google Maps Circle and Geofencing Example</h1>
    <div id="map"></div>

    <script>
        // Initialize the map
        function initMap() {
            // Create a map centered at Dhaka, Bangladesh
            const map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 21.331115, lng: 39.946196 }, // Dhaka coordinates
                zoom: 19,
            });

            // Create a circle overlay on the map
            const circle = new google.maps.Circle({
                strokeColor: "#FF0000",
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: "#FF0000",
                fillOpacity: 0.35,
                map,
                center: { lat: 21.331115, lng: 39.946196 }, // Dhaka coordinates
                radius: 50, // 5000 meters radius (5km)
            });

            // Check user's position when the page loads
            checkPosition(circle);

            // Watch user's position continuously
            navigator.geolocation.watchPosition((position) => {
                const userLatLng = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };

                // Check if user is outside the circle
                if (!google.maps.geometry.spherical.computeContainsLocation(userLatLng, circle)) {
                    alert("You've left the circle!");
                }
            }, (error) => {
                console.error("Error getting user's position:", error);
            });
        }

        // Check if user's position is initially outside the circle
        function checkPosition(circle) {
            navigator.geolocation.getCurrentPosition((position) => {
                const userLatLng = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };

                // Check if user is outside the circle
                if (!google.maps.geometry.spherical.computeContainsLocation(userLatLng, circle)) {
                    alert("You're currently outside the circle!");
                }
            }, (error) => {
                console.error("Error getting user's position:", error);
            });
        }
    </script>

    <!-- Load the Google Maps JavaScript API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCCeZg-o1jX4x1wjuKVdngEkFWHDBVn-I0&callback=initMap" async defer></script>
</body>
</html>
