<html>
<head>
    <link rel="stylesheet" href="../../css/spectre.min.css">
</head>
<body>

    <p>Some text: <input type="text" id="mytext" class="form-input" value="http://espruino.com"></p>
    <p>Click <button id="upload" class="btn btn-primary">Upload</button></p>

    <script src="../../core/lib/customize.js"></script>

    <script>
        // When the 'upload' button is clicked...
        document.getElementById("upload").addEventListener("click", function () {
            // get the text to add
            var text = document.getElementById("mytext").value;
            // build the app's text using a templated String
            var app = `
var txt = ${JSON.stringify(text)};
g.clear(1);
g.setFontAlign(0,0);
g.setFont("6x8");
g.drawString(txt,120,120);
`;
            // send finished app (in addition to contents of app.json)
            sendCustomizedApp({
                storage: [
                    { name: "myapp.app.js", url: "app.js", content: app },
                ]
            });
        });

    </script>
</body>
</html>
