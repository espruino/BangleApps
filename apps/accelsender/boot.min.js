setTimeout(()=>{var e,n,t=require("Storage"),l={x:0,y:0,z:0,diff:0,td:0,mag:0},a=!1,c=t.readJSON("accelsender.json",1)||{},o=!1;function i(e){a=!0,e.mag>l.mag&&(l=e)}function s(){!function(e){try{Bluetooth.println(""),Bluetooth.println(JSON.stringify(e))}catch(e){console.error("Failed to send message via Bluetooth:",e)}}({t:"accel",accel:a?l:Bangle.getAccel()}),l={x:0,y:0,z:0,mag:0,diff:0,td:0},a=!1}function r(){c.enabled?function(){e&&g();e=setInterval(s,globalThis.accelSender.getInterval()),Bangle.on("accel",i)}():g(),Bangle.emit("accelsender",c)}function d(e,n){c[e]!==n&&(c[e]=n,o=!0,r())}function g(){e&&(clearInterval(e),e=void 0),Bangle.removeListener("accel",i)}globalThis.accelSender={setEnabled:e=>d("enabled",e),setWidget:e=>d("widget",e),setInterval:e=>d("interval",e),setStopOnDc:e=>d("stopOnDc",e),isEnabled:()=>c.enabled,getInterval:()=>c.interval||5e3,getWidget:()=>c.widget||0,getStopOnDc:()=>void 0===c.stopOnDc||c.stopOnDc},globalThis.GB=(n=globalThis.GB,e=>{"accelsender"===e.t?globalThis.accelSender.setEnabled(e.enable):n&&setTimeout(n,0,e)}),NRF.on("disconnect",()=>{c.enabled&&c.stopOnDc&&d("enabled",!1)}),E.on("kill",()=>{o&&t.writeJSON("accelsender.json",c)}),r()},1);