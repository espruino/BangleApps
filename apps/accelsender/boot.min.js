setTimeout(()=>{var e,n,l=require("Storage"),t={x:0,y:0,z:0,diff:0,td:0,mag:0},a=!1,c=l.readJSON("accelsender.json",1)||{},i=!1;function o(e){a=!0,e.mag>t.mag&&(t=e)}function r(){!function(e){try{Bluetooth.println(""),Bluetooth.println(JSON.stringify(e))}catch(e){console.error("Failed to send message via Bluetooth:",e)}}({t:"accel",accel:a?t:Bangle.getAccel()}),t={x:0,y:0,z:0,mag:0,diff:0,td:0},a=!1}function d(){c.enabled?function(){e&&s();e=setInterval(r,globalThis.accelSender.getInterval()),Bangle.on("accel",o)}():s(),Bangle.emit("accelsender",c)}function g(e,n){c[e]!==n&&(c[e]=n,i=!0,d())}function s(){e&&(clearInterval(e),e=void 0),Bangle.removeListener("accel",o)}globalThis.accelSender={setEnabled:e=>g("enabled",e),setWidget:e=>g("widget",e),setInterval:e=>g("interval",e),isEnabled:()=>c.enabled,getInterval:()=>c.interval||5e3,getWidget:()=>c.widget||0},globalThis.GB=(n=globalThis.GB,e=>{"accelsender"===e.t?globalThis.accelSender.setEnabled(e.enable):n&&setTimeout(n,0,e)}),Bangle.on("kill",()=>{i&&l.writeJSON("accelsender.json",c)}),d()},1);